!function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery"],function(a,i){return t.daterangepicker=e(a,i)});else if("object"==typeof module&&module.exports){var a="undefined"!=typeof window?window.jQuery:void 0;a||(a=require("jquery"),a.fn||(a.fn={})),module.exports=e(require("moment"),a)}else t.daterangepicker=e(t.moment,t.jQuery)}(this,function(t,e){var a=function(a,i,s){if(this.parentEl="body",this.element=e(a),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("up-pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("up-dropup")&&(this.drops="up"),this.buttonClasses="up-btn up-btn-sm",this.applyClass="up-btn-primary ",this.cancelClass="up-btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"确定",cancelLabel:"取消",weekLabel:"周",customRangeLabel:"自定义范围",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof i&&null!==i||(i={}),i=e.extend(this.element.data(),i),"string"==typeof i.template||i.template instanceof e||(i.template='<div class="up-daterangepicker up-dropdown-menu"><div class="up-calendar up-left"><div class="up-daterangepicker_input"><input class="up-input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="up-fa up-fa-calendar up-glyphicon up-glyphicon-calendar"></i><div class="up-calendar-time"><div></div><i class="icon-u-alarm-clock up-glyphicon up-glyphicon-time"></i></div></div><div class="up-calendar-table"></div></div><div class="up-calendar up-right"><div class="up-daterangepicker_input"><input class="up-input-mini up-form-control" type="text" name="daterangepicker_end" value="" /><i class="up-fa up-fa-calendar up-glyphicon up-glyphicon-calendar"></i><div class="up-calendar-time"><div></div><i class="icon-u-alarm-clock up-glyphicon up-glyphicon-time"></i></div></div><div class="up-calendar-table"></div></div><div class="up-ranges"><div class="up-range_inputs"><button class="up-applyBtn" disabled="disabled" type="button"></button> <button class="up-cancelBtn" type="button"></button></div></div></div>'),this.parentEl=e(i.parentEl&&e(i.parentEl).length?i.parentEl:this.parentEl),this.container=e(i.template).appendTo(this.parentEl),"object"==typeof i.locale&&("string"==typeof i.locale.direction&&(this.locale.direction=i.locale.direction),"string"==typeof i.locale.format&&(this.locale.format=i.locale.format),"string"==typeof i.locale.separator&&(this.locale.separator=i.locale.separator),"object"==typeof i.locale.daysOfWeek&&(this.locale.daysOfWeek=i.locale.daysOfWeek.slice()),"object"==typeof i.locale.monthNames&&(this.locale.monthNames=i.locale.monthNames.slice()),"number"==typeof i.locale.firstDay&&(this.locale.firstDay=i.locale.firstDay),"string"==typeof i.locale.applyLabel&&(this.locale.applyLabel=i.locale.applyLabel),"string"==typeof i.locale.cancelLabel&&(this.locale.cancelLabel=i.locale.cancelLabel),"string"==typeof i.locale.weekLabel&&(this.locale.weekLabel=i.locale.weekLabel),"string"==typeof i.locale.customRangeLabel)){var n=document.createElement("textarea");n.innerHTML=i.locale.customRangeLabel;var r=n.value;this.locale.customRangeLabel=r}if(this.container.addClass("up-"+this.locale.direction),"string"==typeof i.startDate&&(this.startDate=t(i.startDate,this.locale.format)),"string"==typeof i.endDate&&(this.endDate=t(i.endDate,this.locale.format)),"string"==typeof i.minDate&&(this.minDate=t(i.minDate,this.locale.format)),"string"==typeof i.maxDate&&(this.maxDate=t(i.maxDate,this.locale.format)),"object"==typeof i.startDate&&(this.startDate=t(i.startDate)),"object"==typeof i.endDate&&(this.endDate=t(i.endDate)),"object"==typeof i.minDate&&(this.minDate=t(i.minDate)),"object"==typeof i.maxDate&&(this.maxDate=t(i.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof i.applyClass&&(this.applyClass=i.applyClass),"string"==typeof i.cancelClass&&(this.cancelClass=i.cancelClass),"object"==typeof i.dateLimit&&(this.dateLimit=i.dateLimit),"string"==typeof i.opens&&(this.opens=i.opens),"string"==typeof i.drops&&(this.drops=i.drops),"boolean"==typeof i.showWeekNumbers&&(this.showWeekNumbers=i.showWeekNumbers),"boolean"==typeof i.showISOWeekNumbers&&(this.showISOWeekNumbers=i.showISOWeekNumbers),"string"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses),"object"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses.join(" ")),"boolean"==typeof i.showDropdowns&&(this.showDropdowns=i.showDropdowns),"boolean"==typeof i.showCustomRangeLabel&&(this.showCustomRangeLabel=i.showCustomRangeLabel),"boolean"==typeof i.singleDatePicker&&(this.singleDatePicker=i.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof i.timePicker&&(this.timePicker=i.timePicker),"boolean"==typeof i.timePickerSeconds&&(this.timePickerSeconds=i.timePickerSeconds),"number"==typeof i.timePickerIncrement&&(this.timePickerIncrement=i.timePickerIncrement),"boolean"==typeof i.timePicker24Hour&&(this.timePicker24Hour=i.timePicker24Hour),"boolean"==typeof i.autoApply&&(this.autoApply=i.autoApply),"boolean"==typeof i.autoUpdateInput&&(this.autoUpdateInput=i.autoUpdateInput),"boolean"==typeof i.linkedCalendars&&(this.linkedCalendars=i.linkedCalendars),"function"==typeof i.isInvalidDate&&(this.isInvalidDate=i.isInvalidDate),"function"==typeof i.isCustomDate&&(this.isCustomDate=i.isCustomDate),"boolean"==typeof i.alwaysShowCalendars&&(this.alwaysShowCalendars=i.alwaysShowCalendars),0!=this.locale.firstDay)for(var h=this.locale.firstDay;h>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),h--;var l,o,c;if("undefined"==typeof i.startDate&&"undefined"==typeof i.endDate&&e(this.element).is("input[type=text]")){var d=e(this.element).val(),p=d.split(this.locale.separator);l=o=null,2==p.length?(l=t(p[0],this.locale.format),o=t(p[1],this.locale.format)):this.singleDatePicker&&""!==d&&(l=t(d,this.locale.format),o=t(d,this.locale.format)),null!==l&&null!==o&&(this.setStartDate(l),this.setEndDate(o))}if("object"==typeof i.ranges){for(c in i.ranges){l="string"==typeof i.ranges[c][0]?t(i.ranges[c][0],this.locale.format):t(i.ranges[c][0]),o="string"==typeof i.ranges[c][1]?t(i.ranges[c][1],this.locale.format):t(i.ranges[c][1]),this.minDate&&l.isBefore(this.minDate)&&(l=this.minDate.clone());var u=this.maxDate;if(this.dateLimit&&u&&l.clone().add(this.dateLimit).isAfter(u)&&(u=l.clone().add(this.dateLimit)),u&&o.isAfter(u)&&(o=u.clone()),!(this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||u&&l.isAfter(u,this.timepicker?"minute":"day"))){var n=document.createElement("textarea");n.innerHTML=c;var r=n.value;this.ranges[r]=[l,o]}}var m="<ul>";for(c in this.ranges)m+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(m+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),m+="</ul>",this.container.find(".up-ranges").prepend(m)}"function"==typeof s&&(this.callback=s),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".up-calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof i.ranges?this.container.find(".up-ranges").hide():this.autoApply&&this.container.find(".up-applyBtn, .up-cancelBtn").addClass("up-hide"),this.singleDatePicker&&(this.container.addClass("up-single"),this.container.find(".up-calendar.up-left").addClass("up-single"),this.container.find(".up-calendar.up-left").show(),this.container.find(".up-calendar.up-right").hide(),this.container.find(".up-daterangepicker_input input, .up-daterangepicker_input > i").hide(),this.timePicker?this.container.find(".up-ranges ul").hide():this.container.find(".up-ranges").hide()),("undefined"==typeof i.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("up-show-calendar"),this.container.addClass("up-opens"+this.opens),"undefined"!=typeof i.ranges&&"right"==this.opens&&this.container.find(".up-ranges").prependTo(this.container.find(".up-calendar.up-left").parent()),this.container.find(".up-applyBtn, .up-cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".up-applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".up-cancelBtn").addClass(this.cancelClass),this.container.find(".up-applyBtn").html(this.locale.applyLabel),this.container.find(".up-cancelBtn").html(this.locale.cancelLabel),this.container.find(".up-calendar").on("click.up-daterangepicker",".up-prev",e.proxy(this.clickPrev,this)).on("click.up-daterangepicker",".up-next",e.proxy(this.clickNext,this)).on("click.up-daterangepicker",".up-first",e.proxy(this.clickFirst,this)).on("click.up-daterangepicker",".up-last",e.proxy(this.clickLast,this)).on("mousedown.up-daterangepicker","td.up-available",e.proxy(this.clickDate,this)).on("mouseenter.up-daterangepicker","td.up-available",e.proxy(this.hoverDate,this)).on("mouseleave.up-daterangepicker","td.up-available",e.proxy(this.updateFormInputs,this)).on("change.up-daterangepicker","select.up-yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.up-daterangepicker","select.up-monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.up-daterangepicker","select.up-hourselect,select.up-minuteselect,select.up-secondselect,select.up-ampmselect",e.proxy(this.timeChanged,this)).on("click.up-daterangepicker",".up-daterangepicker_input input",e.proxy(this.showCalendars,this)).on("focus.up-daterangepicker",".up-daterangepicker_input input",e.proxy(this.formInputsFocused,this)).on("blur.up-daterangepicker",".up-daterangepicker_input input",e.proxy(this.formInputsBlurred,this)).on("change.up-daterangepicker",".up-daterangepicker_input input",e.proxy(this.formInputsChanged,this)).on("click.up-daterangepicker","th.up-month",e.proxy(this.clickMonth,this)),this.container.find(".up-ranges").on("click.up-daterangepicker","button.up-applyBtn",e.proxy(this.clickApply,this)).on("click.up-daterangepicker","button.up-cancelBtn",e.proxy(this.clickCancel,this)).on("click.up-daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.up-daterangepicker","li",e.proxy(this.hoverRange,this)).on("mouseleave.up-daterangepicker","li",e.proxy(this.updateFormInputs,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.up-daterangepicker":e.proxy(this.show,this),"focus.up-daterangepicker":e.proxy(this.show,this),"keyup.up-daterangepicker":e.proxy(this.elementChanged,this),"keydown.up-daterangepicker":e.proxy(this.keydown,this)}):this.element.on("click.up-daterangepicker",e.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return a.prototype={constructor:a,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".up-right .up-calendar-time select").removeAttr("disabled").removeClass("up-disabled"):this.container.find(".up-right .up-calendar-time select").attr("disabled","disabled").addClass("up-disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("up-active"),this.container.find('input[name="daterangepicker_start"]').addClass("up-active")):(this.container.find('input[name="daterangepicker_end"]').addClass("up-active"),this.container.find('input[name="daterangepicker_start"]').removeClass("up-active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,a;if(this.endDate){if(t=parseInt(this.container.find(".up-left .up-hourselect").val(),10),e=parseInt(this.container.find(".up-left .up-minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".up-left .up-secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".up-left .up-ampmselect").val();"下午"===i&&t<12&&(t+=12),"上午"===i&&12===t&&(t=0)}}else if(t=parseInt(this.container.find(".up-right .up-hourselect").val(),10),e=parseInt(this.container.find(".up-right .up-minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".up-right .up-secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".up-right .up-ampmselect").val();"下午"===i&&t<12&&(t+=12),"上午"===i&&12===t&&(t=0)}this.leftCalendar.month.hour(t).minute(e).second(a),this.rightCalendar.month.hour(t).minute(e).second(a)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".up-ranges li").removeClass("up-active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(a){var i="left"==a?this.leftCalendar:this.rightCalendar,s=i.month.month(),n=i.month.year(),r=i.month.hour(),h=i.month.minute(),l=i.month.second(),o=t([n,s]).daysInMonth(),c=t([n,s,1]),d=t([n,s,o]),p=t(c).subtract(1,"month").month(),u=t(c).subtract(1,"month").year(),m=t([u,p]).daysInMonth(),f=c.day(),i=[];i.firstDay=c,i.lastDay=d;for(var g=0;g<6;g++)i[g]=[];var D=m-f+this.locale.firstDay+1;D>m&&(D-=7),f==this.locale.firstDay&&(D=m-6);for(var k,y,v=t([u,p,D,12,h,l]),g=0,k=0,y=0;g<42;g++,k++,v=t(v).add(24,"hour"))g>0&&k%7===0&&(k=0,y++),i[y][k]=v.clone().hour(r).minute(h).second(l),v.hour(12),this.minDate&&i[y][k].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&i[y][k].isBefore(this.minDate)&&"left"==a&&(i[y][k]=this.minDate.clone()),this.maxDate&&i[y][k].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&i[y][k].isAfter(this.maxDate)&&"right"==a&&(i[y][k]=this.maxDate.clone());"left"==a?this.leftCalendar.calendar=i:this.rightCalendar.calendar=i;var C="left"==a?this.minDate:this.startDate,b=this.maxDate,w=("left"==a?this.startDate:this.endDate,"ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"}),Y='<table class="up-table-condensed">';Y+="<thead>",Y+="<tr>",Y+=C&&!C.isBefore(i.firstDay)||this.linkedCalendars&&"left"!=a?"<th></th><th></th>":'<th class="up-first up-available"><i class="icon-u-left up-glyphicon up-glyphicon-'+w.left+'"></i></th><th class="up-prev up-available"><i class="icon-u-arrow2-left up-glyphicon up-glyphicon-'+w.left+'"></i></th>';var P=i[1][1].format("YYYY")+"年"+this.locale.monthNames[i[1][1].month()];if(this.showDropdowns){for(var x=i[1][1].month(),M=i[1][1].year(),I=b&&b.year()||M+30,L=C&&C.year()||M-20,S=M==L,_=M==I,B='<select class="up-monthselect">',A=0;A<12;A++)B+=(!S||A>=C.month())&&(!_||A<=b.month())?"<option value='"+A+"'"+(A===x?" selected='selected'":"")+">"+this.locale.monthNames[A]+"</option>":"<option value='"+A+"'"+(A===x?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[A]+"</option>";B+="</select>";for(var E='<select class="up-yearselect">',O=L;O<=I;O++)E+='<option value="'+O+'"'+(O===M?' selected="selected"':"")+">"+O+"</option>";E+="</select>",P=B+E,Y+='<th colspan="5" class="up-month">'+P+"</th>"}else Y+=this.singleDatePicker?'<th colspan="5" class="up-month">'+P+"</th>":'<th colspan="5" class="up-month up-available">'+P+"</th>";if(Y+=b&&!b.isAfter(i.lastDay)||this.linkedCalendars&&"right"!=a&&!this.singleDatePicker?"<th></th><th></th>":'<th class="up-next up-available"><i class="icon-u-arrow2-right up-glyphicon up-glyphicon-'+w.right+'"></i></th><th class="up-last up-available"><i class="icon-u-right up-glyphicon up-glyphicon-'+w.right+'"></i></th>',Y+="</tr>",Y+="<tr>",Y+=this.showWeekNumbers||this.showISOWeekNumbers?'<th class="up-week">'+this.locale.weekLabel+"</th>":"<th></th>",e.each(this.locale.daysOfWeek,function(t,e){Y+="<th>"+e+"</th>"}),Y+="<th></th>",Y+="</tr>",Y+="</thead>",Y+="<tbody>",null==this.endDate&&this.dateLimit){var W=this.startDate.clone().add(this.dateLimit).endOf("day");b&&!W.isBefore(b)||(b=W)}for(var y=0;y<6;y++){Y+="<tr>",Y+=this.showWeekNumbers?'<td class="up-week">'+i[y][0].week()+"</td>":this.showISOWeekNumbers?'<td class="up-week">'+i[y][0].isoWeek()+"</td>":'<td class="up-dismonth"></td>';for(var k=0;k<7;k++){var N=[];i[y][k].isSame(new Date,"day")&&N.push("up-today"),i[y][k].isoWeekday()>5&&N.push("up-weekend"),i[y][k].month()!=i[1][1].month()&&N.push("up-dismonth"),this.minDate&&i[y][k].isBefore(this.minDate,"day")&&N.push("up-off","up-disabled"),b&&i[y][k].isAfter(b,"day")&&N.push("up-off","up-disabled"),this.isInvalidDate(i[y][k])&&N.push("up-off","up-disabled"),i[y][k].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&N.push("up-active","up-start-date"),null!=this.endDate&&i[y][k].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&N.push("up-active","up-end-date"),null!=this.endDate&&i[y][k]>this.startDate&&i[y][k]<this.endDate&&N.push("up-in-range");var j=this.isCustomDate(i[y][k]);j!==!1&&("string"==typeof j?N.push(j):Array.prototype.push.apply(N,j));for(var R="",H=!1,g=0;g<N.length;g++)R+=N[g]+" ","up-disabled"==N[g]&&(H=!0);H||(R+="up-available"),Y+=R.indexOf("up-dismonth")!=-1?'<td class="up-dismonth" data-title="r'+y+"c"+k+'"></td>':'<td class="'+R.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+k+'">'+i[y][k].date()+"</td>"}Y+='<td class="up-dismonth"></td></tr>'}Y+="</tbody>",Y+="</table>",this.container.find(".up-calendar.up-"+a+" .up-calendar-table").html(Y),this.container.find(".up-calendar.up-"+a+" .up-calendar-table").find("tr").each(function(){e(this).find(".up-dismonth").length>8&&e(this).remove()})},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,a,i,s=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(s=this.startDate.clone().add(this.dateLimit)),"left"==t)a=this.startDate.clone(),i=this.minDate;else if("right"==t){a=this.endDate.clone(),i=this.startDate;var n=this.container.find(".up-calendar.up-right .up-calendar-time div");if(""!=n.html()&&(a.hour(n.find(".up-hourselect option:selected").val()||a.hour()),a.minute(n.find(".up-minuteselect option:selected").val()||a.minute()),a.second(n.find(".up-secondselect option:selected").val()||a.second()),!this.timePicker24Hour)){var r=n.find(".up-ampmselect option:selected").val();"下午"===r&&a.hour()<12&&a.hour(a.hour()+12),"上午"===r&&12===a.hour()&&a.hour(0)}a.isBefore(this.startDate)&&(a=this.startDate.clone()),s&&a.isAfter(s)&&(a=s.clone())}e='<select class="up-hourselect">';for(var h=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,o=h;o<=l;o++){var c=o;this.timePicker24Hour||(c=a.hour()>=12?12==o?12:o+12:12==o?0:o);var d=a.clone().hour(c),p=!1;i&&d.minute(59).isBefore(i)&&(p=!0),s&&d.minute(0).isAfter(s)&&(p=!0),e+=c!=a.hour()||p?p?'<option value="'+o+'" disabled="disabled" class="up-disabled">'+o+"</option>":'<option value="'+o+'">'+o+"</option>":'<option value="'+o+'" selected="selected">'+o+"</option>"}e+="</select> ",e+=': <select class="up-minuteselect">';for(var o=0;o<60;o+=this.timePickerIncrement){var u=o<10?"0"+o:o,d=a.clone().minute(o),p=!1;i&&d.second(59).isBefore(i)&&(p=!0),s&&d.second(0).isAfter(s)&&(p=!0),e+=a.minute()!=o||p?p?'<option value="'+o+'" disabled="disabled" class="disabled">'+u+"</option>":'<option value="'+o+'">'+u+"</option>":'<option value="'+o+'" selected="selected">'+u+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="up-secondselect">';for(var o=0;o<60;o++){var u=o<10?"0"+o:o,d=a.clone().second(o),p=!1;i&&d.isBefore(i)&&(p=!0),s&&d.isAfter(s)&&(p=!0),e+=a.second()!=o||p?p?'<option value="'+o+'" disabled="disabled" class="disabled">'+u+"</option>":'<option value="'+o+'">'+u+"</option>":'<option value="'+o+'" selected="selected">'+u+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="up-ampmselect">';var m="",f="";i&&a.clone().hour(12).minute(0).second(0).isBefore(i)&&(m=' disabled="disabled" class="up-disabled"'),s&&a.clone().hour(0).minute(0).second(0).isAfter(s)&&(f=' disabled="disabled" class="up-disabled"'),e+=a.hour()>=12?'<option value="上午"'+m+'>上午</option><option value="PM" selected="selected"'+f+">PM</option>":'<option value="上午" selected="selected"'+m+'>上午</option><option value="PM"'+f+">PM</option>",e+="</select>"}this.container.find(".up-calendar.up-"+t+" .up-calendar-time div").html(e)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.up-applyBtn").removeAttr("disabled"):this.container.find("button.up-applyBtn").attr("disabled","disabled"))},move:function(){var t,a={top:0,left:0},i=e(window).width();this.parentEl.is("body")||(a={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-a.top:this.element.offset().top+this.element.outerHeight()-a.top,this.container["up"==this.drops?"addClass":"removeClass"]("up-dropup"),"left"==this.opens?(this.container.css({top:t,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-a.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-a.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>e(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.isShowing||(this._outsideClickProxy=e.proxy(function(t){this.outsideClick(t)},this),e(document).on("mousedown.up-daterangepicker",this._outsideClickProxy).on("touchend.up-daterangepicker",this._outsideClickProxy).on("click.up-daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.up-daterangepicker",this._outsideClickProxy),e(window).on("resize.up-daterangepicker",e.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.up-daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),e(document).off(".up-daterangepicker"),e(window).off(".up-daterangepicker"),this.container.hide(),this.element.trigger("hide.up-daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var a=e(t.target);"focusin"==t.type||a.closest(this.element).length||a.closest(this.container).length||a.closest(".up-calendar-table").length||(this.hide(),this.element.trigger("outsideClick.up-daterangepicker",this))},showCalendars:function(){this.container.addClass("up-show-calendar"),this.move(),this.element.trigger("showCalendar.up-daterangepicker",this)},hideCalendars:function(){this.container.removeClass("up-show-calendar"),this.element.trigger("hideCalendar.up-daterangepicker",this)},hoverRange:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var e=t.target.getAttribute("data-range-key");if(e==this.locale.customRangeLabel)this.updateView();else{var a=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(a[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(a[1].format(this.locale.format))}}},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var a=this.ranges[e];this.startDate=a[0],this.endDate=a[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){var a=e(t.target).parents(".up-calendar");a.hasClass("up-left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){var a=e(t.target).parents(".up-calendar");a.hasClass("up-left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},clickFirst:function(t){var a=e(t.target).parents(".up-calendar");a.hasClass("up-left")?(this.leftCalendar.month.subtract(1,"year"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"year")):this.rightCalendar.month.subtract(1,"year"),this.updateCalendars()},clickLast:function(t){var a=e(t.target).parents(".up-calendar");a.hasClass("up-left")?this.leftCalendar.month.add(1,"year"):(this.rightCalendar.month.add(1,"year"),this.linkedCalendars&&this.leftCalendar.month.add(1,"year")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("up-available")){var a=e(t.target).attr("data-title"),i=a.substr(1,1),s=a.substr(3,1),n=e(t.target).parents(".up-calendar"),r=n.hasClass("up-left")?this.leftCalendar.calendar[i][s]:this.rightCalendar.calendar[i][s];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(r.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(r.format(this.locale.format));var h=this.leftCalendar,l=this.rightCalendar,o=this.startDate;this.endDate||this.container.find(".up-calendar tbody td").each(function(t,a){if(!e(a).hasClass("up-week")&&!e(a).hasClass("up-dismonth")){var i=e(a).attr("data-title"),s=i.substr(1,1),n=i.substr(3,1),c=e(a).parents(".up-calendar"),d=c.hasClass("up-left")?h.calendar[s][n]:l.calendar[s][n];d.isAfter(o)&&d.isBefore(r)||d.isSame(r,"day")?(e(a).addClass("up-in-range"),e(a).hasClass("up-dismonth")&&e(a).removeClass("up-in-range")):e(a).removeClass("up-in-range")}})}},clickDate:function(t){if(e(t.target).hasClass("up-available")){var a=e(t.target).attr("data-title"),i=a.substr(1,1),s=a.substr(3,1),n=e(t.target).parents(".up-calendar"),r=n.hasClass("up-left")?this.leftCalendar.calendar[i][s]:this.rightCalendar.calendar[i][s];if(this.endDate||r.isBefore(this.startDate,"day")){if(this.timePicker){var h=parseInt(this.container.find(".up-left .up-hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".up-left .up-ampmselect").val();"下午"===l&&h<12&&(h+=12),"上午"===l&&12===h&&(h=0)}var o=parseInt(this.container.find(".up-left .up-minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".up-left .up-secondselect").val(),10):0;r=r.clone().hour(h).minute(o).second(c)}this.endDate=null,this.setStartDate(r.clone())}else if(!this.endDate&&r.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var h=parseInt(this.container.find(".up-right .up-hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".up-right .up-ampmselect").val();"下午"===l&&h<12&&(h+=12),"上午"===l&&12===h&&(h=0)}var o=parseInt(this.container.find(".up-right .up-minuteselect").val(),10),c=this.timePickerSeconds?parseInt(this.container.find(".up-right .up-secondselect").val(),10):0;r=r.clone().hour(h).minute(o).second(c)}this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),
this.updateView(),t.stopPropagation()}},clickMonth:function(t){if(e(t.target).hasClass("up-available")){var a=e(t.target).parents(".up-calendar"),i=e(t.target).parents("thead").siblings("tbody").find("td.up-available").first().attr("data-title"),s=i.substr(1,1),n=i.substr(3,1),r=a.hasClass("up-left")?this.leftCalendar.calendar[s][n]:this.rightCalendar.calendar[s][n],h=e(t.target).parents("thead").siblings("tbody").find("td.up-available").last().attr("data-title"),l=h.substr(1,1),o=h.substr(3,1),c=a.hasClass("up-left")?this.leftCalendar.calendar[l][o]:this.rightCalendar.calendar[l][o];this.setStartDate(r.clone()),this.setEndDate(c.clone()),this.updateView()}},calculateChosenLabel:function(){var t=!0,e=0;for(var a in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[a][0])&&this.endDate.isSame(this.ranges[a][1])){t=!1,this.chosenLabel=this.container.find(".up-ranges li:eq("+e+")").addClass("up-active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[a][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[a][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".up-ranges li:eq("+e+")").addClass("up-active").html();break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".up-ranges li:last").addClass("up-active").html():this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hide(),this.element.trigger("apply.up-daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.up-daterangepicker",this)},monthOrYearChanged:function(t){var a=e(t.target).closest(".up-calendar").hasClass("up-left"),i=a?"up-left":"up-right",s=this.container.find(".up-calendar."+i),n=parseInt(s.find(".up-monthselect").val(),10),r=s.find(".up-yearselect").val();a||(r<this.startDate.year()||r==this.startDate.year()&&n<this.startDate.month())&&(n=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&n<this.minDate.month())&&(n=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&n>this.maxDate.month())&&(n=this.maxDate.month(),r=this.maxDate.year()),a?(this.leftCalendar.month.month(n).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(n).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var a=e(t.target).closest(".up-calendar"),i=a.hasClass("up-left"),s=parseInt(a.find(".up-hourselect").val(),10),n=parseInt(a.find(".up-minuteselect").val(),10),r=this.timePickerSeconds?parseInt(a.find(".up-secondselect").val(),10):0;if(!this.timePicker24Hour){var h=a.find(".up-ampmselect").val();"下午"===h&&s<12&&(s+=12),"上午"===h&&12===s&&(s=0)}if(i){var l=this.startDate.clone();l.hour(s),l.minute(n),l.second(r),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var o=this.endDate.clone();o.hour(s),o.minute(n),o.second(r),this.setEndDate(o)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(a){var i=e(a.target).closest(".up-calendar").hasClass("up-right"),s=t(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),n=t(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);s.isValid()&&n.isValid()&&(i&&n.isBefore(s)&&(s=n.clone()),this.setStartDate(s),this.setEndDate(n),i?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateView()},formInputsFocused:function(t){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("up-active"),e(t.target).addClass("up-active");var a=e(t.target).closest(".up-calendar").hasClass("up-right");a&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(e){if(!this.endDate){var a=this.container.find('input[name="daterangepicker_end"]').val(),i=t(a,this.locale.format);i.isValid()&&(this.setEndDate(i),this.updateView())}},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var e=this.element.val().split(this.locale.separator),a=null,i=null;2===e.length&&(a=t(e[0],this.locale.format),i=t(e[1],this.locale.format)),(this.singleDatePicker||null===a||null===i)&&(a=t(this.element.val(),this.locale.format),i=a),a.isValid()&&i.isValid()&&(this.setStartDate(a),this.setEndDate(i),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".up-daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,i){return this.each(function(){var s=e(this);s.data("daterangepicker")&&s.data("daterangepicker").remove(),s.data("daterangepicker",new a(s,t,i))}),this},a});